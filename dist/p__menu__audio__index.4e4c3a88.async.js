(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"5sUj":function(e,t,a){e.exports={Audio:"Audio___1f_wB",audio:"Audio___1f_wB",line:"line___1oLds"}},KL6x:function(e,t,a){},lfel:function(e,t,a){"use strict";var i=a("nKUr"),n=e=>Object(i["jsx"])("div",{style:{width:e.width+"px",height:e.height+"px"}});t["a"]=n},zdj1:function(e,t,a){"use strict";a.r(t);var i=a("9og8"),n=a("WmNS"),c=a.n(n),r=a("5sUj"),s=a.n(r),d=a("/MKj"),o=a("FQJK"),u=(a("cWXX"),a("/ezw")),l=(a("Q9mQ"),a("diRs")),j=(a("8dk+"),a("eZ87")),b=a("tJVT"),v=(a("KL6x"),a("q1tI")),O=a("4ANX"),h=a("jnMK"),m=a("lfel"),x=a("vDqi"),p=a.n(x),f=a("Ns3m"),g=a("NEHW"),w=a("It0s"),y=a("SLhE"),N=a("nKUr"),L=e=>{var t=Object(v["useState"])(0),a=Object(b["a"])(t,2),n=a[0],r=a[1],s=Object(v["useState"])(null),d=Object(b["a"])(s,2),o=d[0],x=d[1],L=Object(v["useState"])(!1),A=Object(b["a"])(L,2),k=A[0],S=A[1];Object(g["a"])((()=>{var t;r(e.audioActiveIndex),S(!0),null===(t=document.getElementById("globalAudio"))||void 0===t||t.setAttribute("src",""),T(!1)}),[e.audioActiveIndex]),Object(v["useEffect"])((()=>{r(e.audioActiveIndex)}),[e.audioActiveIndex]);var I=Object(v["useState"])(""),E=Object(b["a"])(I,2),_=E[0],C=E[1];Object(v["useEffect"])((()=>{if(e.audioList&&0!==e.audioList.length&&-1!==n){if(!e.audioList[n])return;x(e.audioList[n]);var t=e.audioList[n].sid,a=Object(y["d"])(t),i=Object(y["a"])(a,"");i===_?R():C(i)}}),[e.audioList,n]),Object(v["useEffect"])((()=>{R()}),[_]);var z=Object(v["useState"])((()=>{var e;return!(null===(e=document.getElementById("globalAudio"))||void 0===e||!e.getAttribute("src"))})),B=Object(b["a"])(z,2),U=B[0],T=B[1];function R(){return V.apply(this,arguments)}function V(){return V=Object(i["a"])(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!U){e.next=9;break}re(pe(Math.floor(q.duration))),me.run(),q.addEventListener("timeupdate",me.run,!1),q.addEventListener("ended",xe,!1),ue(!q.paused),M({}),e.next=17;break;case 9:if(_){e.next=11;break}return e.abrupt("return");case 11:return null===(t=document.getElementById("globalAudio"))||void 0===t||t.setAttribute("src",_),T(!1),e.next=15,K();case 15:a=e.sent,M(a);case 17:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function K(){return new Promise(((e,t)=>{var a=document.body.getAttribute("data-port");a?p.a.post("https://sdcloudstorage.on.fleek.co:".concat(a,"/api/getAudioTags"),{url:_}).then((t=>{e(t.data)})).catch((e=>{t(e)})):e({})}))}function M(e){return J.apply(this,arguments)}function J(){return J=Object(i["a"])(c.a.mark((function e(t){var a,i,n,r,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a="",i=(null===t||void 0===t?void 0:t.artist)||"",t.picture&&(n=new Uint8Array(t.picture.data),r=new Blob([n],{type:t.picture.type}),a=URL.createObjectURL(r)),o){e.next=5;break}return e.abrupt("return");case 5:s=o,X({logo:a||"",title:s.file_name,user:i,size:Object(f["b"])(s.file_size,2),createTime:Object(f["a"])(s.created),sid:s.sid,url:_}),k&&he(),S(!1);case 9:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}var D=Object(v["useState"])((()=>{var e=document.getElementById("globalAudio");return e})),P=Object(b["a"])(D,2),q=P[0],F=(P[1],Object(v["useState"])()),Q=Object(b["a"])(F,2),W=Q[0],X=Q[1],H=Object(v["useState"])(0),Z=Object(b["a"])(H,2),G=Z[0],Y=Z[1],$=Object(v["useState"])("00:00"),ee=Object(b["a"])($,2),te=ee[0],ae=ee[1],ie=Object(v["useState"])("00:00"),ne=Object(b["a"])(ie,2),ce=ne[0],re=ne[1],se=Object(v["useState"])(!1),de=Object(b["a"])(se,2),oe=de[0],ue=de[1],le=Object(v["useState"])(100),je=Object(b["a"])(le,2),be=je[0],ve=je[1];function Oe(){oe?q.pause():q.play(),ue(!oe)}function he(){q.play(),ue(!0)}Object(v["useEffect"])((()=>(U||(q.load(),q.oncanplay=()=>{re(pe(Math.floor(q.duration))),q.addEventListener("timeupdate",me.run,!1),q.addEventListener("ended",xe,!1)}),()=>{q&&(q.removeEventListener("timeupdate",me.run,!1),q.removeEventListener("ended",xe,!1))})),[q]);var me=Object(w["a"])((()=>{q&&(Y(q.currentTime),ae(pe(Math.floor(q.currentTime))))}),{wait:500});function xe(){q.pause(),ue(!1)}function pe(e){var t=parseInt(e,10),a=parseInt((t/60).toString(),10),i=(t%60).toString();return 0===a?a="00":a<10&&(a="0"+a),1===i.length&&(i="0"+i),a+":"+i}function fe(e){q.currentTime=e,me.run()}var ge=Object(v["useState"])(100*q.volume),we=Object(b["a"])(ge,2),ye=we[0],Ne=we[1];Object(v["useEffect"])((()=>{q.volume=ye/100}),[ye]);var Le=()=>Object(N["jsx"])("div",{className:"audioValumeProgress",children:Object(N["jsx"])(j["a"],{className:"audioVolumeProgressVertical",min:0,max:100,step:1,tooltipVisible:!1,defaultValue:ye,value:ye,vertical:!0,onChange:Ae})});function Ae(e){Ne(e),ve(e)}function ke(){Ne(ye>0?0:be)}function Se(){var t=n-1;0===n&&(t=e.audioList.length-1),S(!0),r(t)}function Ie(){var t=n+1;n===e.audioList.length-1&&(t=0),S(!0),r(t)}function Ee(){var e=o.file_name;p()({method:"get",url:_,responseType:"blob",headers:{"content-type":"audio/mpeg"}}).then((t=>{var a=new Blob([t.data],{type:t.data.type}),i=document.createElement("a"),n=window.URL.createObjectURL(a);i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)})).catch((e=>{console.warn(e)}))}function _e(){return W?Object(N["jsxs"])(N["Fragment"],{children:[Object(N["jsxs"])("div",{className:"titleBox",children:[Object(N["jsx"])("div",{className:"title",children:W.title}),W.user&&Object(N["jsxs"])("div",{className:"user",children:["- ",W.user]})]}),Object(N["jsxs"])("div",{className:"infoBox",children:[Object(N["jsxs"])("div",{children:[Object(N["jsx"])("div",{className:"title",children:"Size"}),Object(N["jsx"])("div",{className:"value",children:W.size})]}),Object(N["jsxs"])("div",{children:[Object(N["jsx"])("div",{className:"title",children:"Created Time:"}),Object(N["jsx"])("div",{className:"value",children:W.createTime})]}),Object(N["jsxs"])("div",{children:[Object(N["jsx"])("div",{className:"title",children:"SID\uff1a"}),Object(N["jsx"])("div",{className:"value pointer",onClick:Ce,children:Object(N["jsx"])(l["a"],{content:W.sid,children:W.sid.substr(0,25)+"..."})})]})]})]}):Object(N["jsx"])(u["a"],{paragraph:{rows:1}})}function Ce(){e.showCheck(e.audioActiveIndex,e.audioList[e.audioActiveIndex])}return Object(N["jsxs"])("div",{className:"AudioControl",children:[Object(N["jsx"])("div",{className:"audioImage",style:{backgroundImage:"url(".concat(null===W||void 0===W?void 0:W.logo,")")}}),Object(N["jsxs"])("div",{className:"controlBox",children:[_e(),Object(N["jsxs"])("div",{className:"actionBox",children:[Object(N["jsxs"])("div",{className:"actionLeft",children:[Object(N["jsx"])(h["a"],{borderAnimation:!0,radius:14,defaultBorder:!1,background:"linear-gradient(174deg, #111315 0%, rgb(44, 46, 53) 100%)",children:Object(N["jsx"])("div",{className:"left",onClick:Se,children:Object(N["jsx"])(O["a"],{type:"icon-shangyishou",size:16})})}),Object(N["jsx"])(m["a"],{width:16}),Object(N["jsx"])(h["a"],{borderAnimation:!0,radius:18,defaultBorder:!1,background:"linear-gradient(174deg, #111315 0%, rgb(44, 46, 53) 100%)",children:Object(N["jsx"])("div",{className:"playAndStop",onClick:Oe,children:oe?Object(N["jsx"])(O["a"],{type:"icon-zanting",size:20}):Object(N["jsx"])(O["a"],{type:"icon-kaiqi",size:20})})}),Object(N["jsx"])(m["a"],{width:16}),Object(N["jsx"])(h["a"],{borderAnimation:!0,radius:14,defaultBorder:!1,background:"linear-gradient(174deg, #111315 0%, rgb(44, 46, 53) 100%)",children:Object(N["jsx"])("div",{className:"right",onClick:Ie,children:Object(N["jsx"])(O["a"],{type:"icon-xiayishou",size:16})})}),Object(N["jsx"])(l["a"],{content:Le(),overlayClassName:"audioVolumePopover",trigger:"hover",children:Object(N["jsx"])("div",{className:"volume",onClick:ke,children:ye>0?Object(N["jsx"])(O["a"],{type:"icon-yinliang",size:16}):Object(N["jsx"])(O["a"],{type:"icon-jingyin",size:16})})}),Object(N["jsx"])("div",{className:"download",onClick:Ee,children:Object(N["jsx"])(O["a"],{type:"icon-xiazai1",size:16})})]}),Object(N["jsxs"])("div",{className:"actionRight",children:[te," / ",ce]})]}),Object(N["jsx"])("div",{className:"progress",children:Object(N["jsx"])(j["a"],{className:"progress",min:0,max:Math.floor((null===q||void 0===q?void 0:q.duration)||0),step:1,tooltipVisible:!1,defaultValue:0,value:G,vertical:!1,onChange:fe})})]})]})};function A(e){var t=e.globalTop.dispatch,a=e.menu,i=a.audioList,n=a.audioActiveIndex;return{dispatch:t,audioList:i,audioActiveIndex:n}}var k=Object(d["c"])(A)(L),S=a("2LCi"),I=a("R8ux"),E=S["b"].contract,_=S["b"].getID,C=(S["b"].getlist,e=>{var t="music",a=function(){var e=Object(i["a"])(c.a.mark((function e(t){var a,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=10,e.next=3,E.view_files_in_folder({did:I["b"]+_,folder:"music",from_index:(t*a).toString(),limit:a});case 3:return i=e.sent,e.abrupt("return",JSON.parse(i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N["jsx"])("div",{className:s.a.Audio,children:Object(N["jsx"])(o["a"],{getList:a,title:t,noData:"No audio",tableAfterContent:t=>{var a;return(null===(a=e.audioList)||void 0===a?void 0:a.length)>0?Object(N["jsxs"])(N["Fragment"],{children:[Object(N["jsx"])(k,{showCheck:t}),Object(N["jsx"])("div",{className:s.a.line})]}):""}})})});function z(e){var t=e.menu.audioList;return{audioList:t}}t["default"]=Object(d["c"])(z)(C)}}]);