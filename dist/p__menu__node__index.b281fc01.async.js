(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"/Frw":function(e,t,a){e.exports={PeersTable:"PeersTable___1xUQH",peersTable:"PeersTable___1xUQH",header:"header___20W65",checkedBox:"checkedBox___XLSIv",sort:"sort___2Acvt",top:"top___3tVyt",bottom:"bottom___2MmlH",icon:"icon___1c0j4",headerItemBox:"headerItemBox___3KMhw",content:"content___oMEqO",tableListBox:"tableListBox___E_utw",setIcon:"setIcon___WCayl",tableList:"tableList___DxJUM",nameBox:"nameBox___2HWaA",keyBox:"keyBox___Qttwk",nowrap:"nowrap___nfQbp",fileSetBottomRender:"fileSetBottomRender___1z1LL",box:"box___3w94H",disabled:"disabled___2pLgB",innerBox:"innerBox___1sugO",card:"card___1GBh0",title:"title___3DaTA",setBox:"setBox___U4yks",line:"line___jwvHU"}},"/QNg":function(e,t,a){e.exports={node:"node___3qhKB",title:"title___9X1AN"}},"4ANX":function(e,t,a){"use strict";var r=a("R+Pm"),n=a("nKUr"),s=e=>{var t=Object(r["a"])({scriptUrl:"//at.alicdn.com/t/font_2995112_15r2fyi3v6t.js"});return Object(n["jsx"])(t,{className:e.className,type:e.type,style:{fontSize:e.size+"px",color:e.color}})};t["a"]=s},"9PCQ":function(e,t,a){e.exports=a.p+"static/noData.0598ba57.png"},LhIy:function(e,t,a){e.exports={Card:"Card___1dkUe",card:"Card___1dkUe",bg1:"bg1___24BOV",bg2:"bg2___UzlPQ",defaultBorder:"defaultBorder___1_YUD",borderAnimation:"borderAnimation___1YmcH",bg2Animation:"bg2Animation___279zQ"}},ODOT:function(e,t,a){"use strict";var r=a("SOgc"),n=a.n(r),s=a("/MKj"),c=a("nKUr"),i=e=>Object(c["jsxs"])("div",{className:n.a.noData,children:[Object(c["jsx"])("div",{className:n.a.image,style:{backgroundImage:"url(".concat(e.image||a("9PCQ"),")")}}),Object(c["jsx"])("div",{children:e.title||"None"})]});function o(e){var t=e.globalTop.token;return{token:t}}var l=Object(s["c"])(o)(i);t["a"]=l},SOgc:function(e,t,a){e.exports={noData:"noData___1C8Nx",image:"image___3wLPh"}},jnMK:function(e,t,a){"use strict";var r=a("k1fw"),n=a("LhIy"),s=a.n(n),c=a("nKUr"),i=e=>{e=Object(r["a"])({inline:!0,radius:8,defaultBorder:!0,background:"rgb(38, 41, 45)",borderAnimation:!1},e);var t="".concat(s.a.Card," ").concat(e.borderAnimation?s.a.borderAnimation:""),a={borderRadius:e.radius+"px",display:e.inline?"inline-block":"block"};e.boxShadow&&(a.boxShadow=e.boxShadow);var n={borderRadius:e.radius+"px",background:e.background},i={borderRadius:e.radius+"px"};return Object(c["jsxs"])("div",{className:t,style:a,children:[Object(c["jsx"])("div",{className:"".concat(s.a.bg1," ").concat(e.className||""),style:n}),Object(c["jsx"])("div",{className:"".concat(s.a.bg2," ").concat(e.defaultBorder?s.a.defaultBorder:""),style:i}),e.children]})};t["a"]=i},lfel:function(e,t,a){"use strict";var r=a("nKUr"),n=e=>Object(r["jsx"])("div",{style:{width:e.width+"px",height:e.height+"px"}});t["a"]=n},r0Fe:function(e,t,a){},t5v9:function(e,t,a){e.exports=a.p+"static/StaticMap.8fa034b4.svg"},yZND:function(e,t,a){"use strict";a.r(t);var r=a("9og8"),n=a("tJVT"),s=a("WmNS"),c=a.n(s),i=a("/QNg"),o=a.n(i),l=a("/MKj"),d=a("q1tI"),b=a("MKbM"),u=a.n(b),p=a("iYt/"),h=a("t5v9"),j=a.n(h),x=(a("r0Fe"),a("nKUr")),_=e=>{var t=e=>{var t=1.7,a=350,r=e-a,n=r*t;return n>3e3?3e3:n<700?700:n},a=e=>e>960?window.innerHeight<940?.6*(window.innerHeight-180):.273*e:.5*e,r=e=>{var t=e.width,a=e.height,r=e.children,n=p["a"]().scale(a/Math.PI).translate([t/2,a/2]).precision(.1),s=p["b"]().projection(n);return r({path:s})},s=Object(d["useState"])(t(window.innerWidth)),c=Object(n["a"])(s,2),i=c[0],o=c[1],l=Object(d["useState"])(a(i)),b=Object(n["a"])(l,2),h=b[0],_=b[1],v=Object(d["useState"])(4),m=Object(n["a"])(v,2),g=m[0];m[1];Object(d["useEffect"])((()=>{var e=()=>{var e=t(window.innerWidth);console.log(e),o(e),_(a(e))};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}));var O=e=>{var t=e.width,a=e.height,r=e.path,n=e.peersCoordinates,s=(e.handleMouseEnter,e.handleMouseLeave,p["c"](u.a.createElement("svg")).attr("width",t).attr("height",a).attr("viewBox","0 0 ".concat(t," ").concat(a)));return n=[{coordinates:[-99.69,35.69],peerIds:["12D3KooWGu6QDRJzvWKcqQjZYreYY6NX1wCQ5LPFNLcZmzTCbaMM"]}],n.forEach((e=>{var t=e.peerIds,a=e.coordinates;s.append("path").datum({type:"Point",coordinates:a}).attr("d",r.pointRadius((()=>f(t.length)))).attr("fill",(()=>w(t.length))).attr("class","mapDot")})),s.node().toReact()},f=e=>e<10?5:e<100?8:10,w=e=>e<10?"rgba(00, 184, 176, 0.4)":e<100?"rgba(00, 184, 176, 0.6)":e<200?"rgba(00, 184, 176, 0.8)":"rgba(00, 184, 176, 1)";return Object(x["jsxs"])("div",{className:"mapBox",children:[Object(x["jsx"])("div",{className:"relative ",style:{width:i,height:h,background:"transparent url(".concat(j.a,") left no-repeat"),backgroundSize:"auto 100%"},children:Object(x["jsx"])(r,{width:i,height:h,children:e=>{var t=e.path;return Object(x["jsx"])(O,{width:i,height:h,path:t})}})}),Object(x["jsx"])("div",{className:"peersText",style:{position:"absolute",top:h-150,left:"100"},children:Object(x["jsxs"])("span",{children:[g," peers"]})}),Object(x["jsxs"])("div",{style:{position:"absolute",top:h-150,left:i/2+150},children:[Object(x["jsxs"])("div",{className:"mapDotExplanText",children:[Object(x["jsx"])("div",{className:"mapDotExplanation mr1",style:{width:"8px",height:"8px",backgroundColor:w(1)}}),"1-10"]}),Object(x["jsxs"])("div",{className:"mapDotExplanText",children:[Object(x["jsx"])("div",{className:"mapDotExplanation ml3 mr1",style:{width:"8px",height:"8px",backgroundColor:w(50)}}),"10-100"]}),Object(x["jsxs"])("div",{className:"mapDotExplanText",children:[Object(x["jsx"])("div",{className:"mapDotExplanation ml3 mr1",style:{width:"8px",height:"8px",backgroundColor:w(110)}}),"100-200"]}),Object(x["jsxs"])("div",{className:"mapDotExplanText",children:[Object(x["jsx"])("div",{className:"mapDotExplanation ml3 mr1",style:{width:"8px",height:"8px",backgroundColor:w(210)}}),"200+"]})]})]})},v=_,m=a("k1fw"),g=a("/Frw"),O=a.n(g),f=a("4ANX"),w=a("jnMK"),k=e=>{var t=Object(d["useState"])([]),a=Object(n["a"])(t,2),r=a[0],s=a[1],c=Object(d["useState"])([{key:"site",title:"site",width:194},{key:"delay",title:"delay",width:82},{key:"connect",title:"IP",width:107},{key:"belongCluster",title:"belongCluster",width:160},{key:"peer",title:"peer",width:182}]),i=Object(n["a"])(c,2),o=i[0],l=(i[1],e=>{if(e){var t=Math.floor(e/1044*100);return{minWidth:t+"%"}}return{flex:1}}),b=()=>o.map((e=>{var t=e.align||"center",a=()=>{var t="";return e.sort&&(t+="pointer"),t};return Object(x["jsx"])("div",{className:a(),style:Object(m["a"])(Object(m["a"])({},l(e.width)),{},{textAlign:t}),children:e.title},e.key)}));Object(d["useEffect"])((()=>{var t=[];for(var a in e.peersData){var r={icon:e.peersData[a].icon,site:e.peersData[a].site,cluster:e.peersData[a].cluster,belongCluster:e.peersData[a].belongCluster,connect:e.peersData[a].connect,delay:e.peersData[a].Latency,peer:e.peersData[a].Peer};""===r.cluster||t.push(r)}s(t)}),[e.peersData]);var u=Object(d["useRef"])(null),p=()=>0!=r.length&&r.map(((e,t)=>{var a=e=>o.map((t=>{var a=t.align||"center",r=e[t.key];return"site"===t.key&&(r=Object(x["jsxs"])("div",{className:"df icon",children:[Object(x["jsx"])(f["a"],{type:e.icon,size:20,className:"".concat(O.a.icon)}),r]})),Object(x["jsx"])("div",{style:Object(m["a"])(Object(m["a"])({},l(t.width)),{},{textAlign:a}),className:"df headerItemBox",children:r},t.key)}));return Object(x["jsx"])("div",{className:"".concat(O.a.tableListBox," tableListBox"),children:Object(x["jsx"])(w["a"],{borderAnimation:!0,inline:!1,children:Object(x["jsx"])("div",{className:O.a.tableList,children:a(e)})})},t)}));return Object(x["jsx"])("div",{className:O.a.PeersTable,children:Object(x["jsxs"])("div",{className:O.a.tableCardBox,children:[Object(x["jsx"])("div",{className:O.a.header,children:b()}),Object(x["jsx"])("div",{className:O.a.content,ref:u,children:Object(x["jsxs"])(x["Fragment"],{children:[p(),Object(x["jsx"])("div",{className:"df jcc",children:"---No More---"})]})})]})})};function y(e){var t=e.globalTop.token;return{token:t}}var N,D,B,C,S=Object(l["c"])(y)(k),L=S,A=a("+nDH"),E=a("rAM+"),M=a("BvWe"),P=a("AmdD"),T=a.n(P),I=a("t4lQ"),U=a.n(I),z=(T.a,e=>{if("n/a"!==e){var t=parseInt(e),a=e.substring(e.length-1,-1);return t="s"===a?1e3*t:t,t}});class K{constructor(){N=Object(M["a"])({name:"geoipCache",version:"^7.0.0",maxAge:6048e5}),D=U()(500),B=new Map,C=0}findLocations(e){var t=this;return Object(r["a"])(c.a.mark((function a(){var r,n,s,i,o,l,d,b,u,p,h,j;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.peers,n=e.ipfs,s="66.6.44.4",a.prev=2,a.next=5,T.a.lookup(n,s);case 5:a.sent,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](2),console.error("Error: "+a.t0);case 11:return a.prev=11,a.next=14,T.a.lookupPretty(n,"/ip4/"+s);case 14:a.sent,a.next=20;break;case 17:a.prev=17,a.t1=a["catch"](11),console.error("Error: "+a.t1);case 20:i=[],o=Object(E["a"])(t.optimizedPeerSet(r)),a.prev=22,o.s();case 24:if((l=o.n()).done){a.next=44;break}if(d=l.value,b=d.peer,u=d.Addr.split("/"),p=[u[1].substring(u[1].length-1,u[1].length),u[2]],p){a.next=31;break}return a.abrupt("continue",42);case 31:if(h=p[1],!D.has(h)){a.next=34;break}return a.abrupt("continue",42);case 34:return a.next=36,N.get(h);case 36:if(j=a.sent,!j){a.next=40;break}return i[b]=j,a.abrupt("continue",42);case 40:if(!B.has(h)){a.next=42;break}return a.abrupt("continue",42);case 42:a.next=24;break;case 44:a.next=49;break;case 46:a.prev=46,a.t2=a["catch"](22),o.e(a.t2);case 49:return a.prev=49,o.f(),a.finish(49);case 52:return a.abrupt("return",i);case 53:case"end":return a.stop()}}),a,null,[[2,8],[11,17],[22,46,49,52]])})))()}optimizedPeerSet(e){if(C<3){var t=e=>z(e.Latency)||9999,a=e.concat().sort(((e,a)=>t(e)-t(a)));switch(C+=1,C-1){case 0:return a.slice(0,10);case 1:return a.slice(0,100);default:return a.slice(0,200)}}return e}}var Q=K,H=a("vDqi"),R=a.n(H),W=a("ODOT"),F=a("lfel"),Y=e=>{var t=Object(d["useState"])([]),a=Object(n["a"])(t,2),s=a[0],i=a[1];return Object(d["useEffect"])((()=>{console.log("props",e),Object(r["a"])(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:R()({method:"post",url:A["a"]+":25001/api/v0/swarm/peers?verbose=true&streams=true&latency=true&direction=true"}).then(function(){var e=Object(r["a"])(c.a.mark((function e(t){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),i([...t.data.Peers]),t.data.Peers.map((e=>{console.log(e),e.icon="icon-zhongguo",e.site="China",e.belongCluster="SDClould",e.cluster=e.Streams?e.Streams[0].Protocol:"";var t=e.Addr.split("/"),a=[t[1].substring(t[1].length-1,t[1].length),t[2]];e.connect=a[1]})),new Q;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((e=>{}));case 1:case"end":return e.stop()}}),e)})))()}),[]),Object(x["jsxs"])("div",{className:o.a.node,children:[Object(x["jsx"])(v,{peersData:s}),s.length?Object(x["jsx"])(L,{peersData:s}):Object(x["jsxs"])(x["Fragment"],{children:[Object(x["jsx"])(F["a"],{height:100}),Object(x["jsx"])(W["a"],{title:"none"})]})]})};function q(e){var t=e.globalTop.token;return{token:t}}t["default"]=Object(l["c"])(q)(Y)}}]);